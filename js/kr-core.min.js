(()=>{var oe=r=>typeof r=="object"&&r!=null&&r.nodeType===1,ne=(r,a)=>(!a||r!=="hidden")&&r!=="visible"&&r!=="clip",Z=(r,a)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){let g=getComputedStyle(r,null);return ne(g.overflowY,a)||ne(g.overflowX,a)||(y=>{let w=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch(v){return null}})(y);return!!w&&(w.clientHeight<y.scrollHeight||w.clientWidth<y.scrollWidth)})(r)}return!1},z=(r,a,g,y,w,d,v,h)=>d<r&&v>a||d>r&&v<a?0:d<=r&&h<=g||v>=a&&h>=g?d-r-y:v>a&&h<g||d<r&&h>g?v-a+w:0,re=r=>{let a=r.parentElement;return a==null?r.getRootNode().host||null:a},_=(r,a)=>{var g,y,w,d;if(typeof document>"u")return[];let{scrollMode:v,block:h,inline:E,boundary:B,skipOverflowHiddenElements:U}=a,X=typeof B=="function"?B:f=>f!==B;if(!oe(r))throw new TypeError("Invalid target");let W=document.scrollingElement||document.documentElement,H=[],p=r;for(;oe(p)&&X(p);){if(p=re(p),p===W){H.push(p);break}p!=null&&p===document.body&&Z(p)&&!Z(document.documentElement)||p!=null&&Z(p,U)&&H.push(p)}let A=(y=(g=window.visualViewport)==null?void 0:g.width)!=null?y:innerWidth,N=(d=(w=window.visualViewport)==null?void 0:w.height)!=null?d:innerHeight,{scrollX:k,scrollY:I}=window,{height:T,width:e,top:t,right:o,bottom:i,left:l}=r.getBoundingClientRect(),{top:u,right:C,bottom:S,left:L}=(f=>{let n=window.getComputedStyle(f);return{top:parseFloat(n.scrollMarginTop)||0,right:parseFloat(n.scrollMarginRight)||0,bottom:parseFloat(n.scrollMarginBottom)||0,left:parseFloat(n.scrollMarginLeft)||0}})(r),c=h==="start"||h==="nearest"?t-u:h==="end"?i+S:t+T/2-u+S,s=E==="center"?l+e/2-L+C:E==="end"?o+C:l-L,m=[];for(let f=0;f<H.length;f++){let n=H[f],{height:b,width:D,top:F,right:G,bottom:J,left:q}=n.getBoundingClientRect();if(v==="if-needed"&&t>=0&&l>=0&&i<=N&&o<=A&&t>=F&&i<=J&&l>=q&&o<=G)return m;let O=getComputedStyle(n),R=parseInt(O.borderLeftWidth,10),Y=parseInt(O.borderTopWidth,10),j=parseInt(O.borderRightWidth,10),P=parseInt(O.borderBottomWidth,10),M=0,x=0,V="offsetWidth"in n?n.offsetWidth-n.clientWidth-R-j:0,$="offsetHeight"in n?n.offsetHeight-n.clientHeight-Y-P:0,K="offsetWidth"in n?n.offsetWidth===0?0:D/n.offsetWidth:0,Q="offsetHeight"in n?n.offsetHeight===0?0:b/n.offsetHeight:0;if(W===n)M=h==="start"?c:h==="end"?c-N:h==="nearest"?z(I,I+N,N,Y,P,I+c,I+c+T,T):c-N/2,x=E==="start"?s:E==="center"?s-A/2:E==="end"?s-A:z(k,k+A,A,R,j,k+s,k+s+e,e),M=Math.max(0,M+I),x=Math.max(0,x+k);else{M=h==="start"?c-F-Y:h==="end"?c-J+P+$:h==="nearest"?z(F,J,b,Y,P+$,c,c+T,T):c-(F+b/2)+$/2,x=E==="start"?s-q-R:E==="center"?s-(q+D/2)+V/2:E==="end"?s-G+j+V:z(q,G,D,R,j+V,s,s+e,e);let{scrollLeft:ee,scrollTop:te}=n;M=Q===0?0:Math.max(0,Math.min(te+M/Q,n.scrollHeight-b/Q+$)),x=K===0?0:Math.max(0,Math.min(ee+x/K,n.scrollWidth-D/K+V)),c+=te-M,s+=ee-x}m.push({el:n,top:M,left:x})}return m};var se=r=>r===!1?{block:"end",inline:"nearest"}:(a=>a===Object(a)&&Object.keys(a).length!==0)(r)?r:{block:"start",inline:"nearest"};function ie(r,a){if(!r.isConnected||!(w=>{let d=w;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(r))return;let g=(w=>{let d=window.getComputedStyle(w);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(r);if((w=>typeof w=="object"&&typeof w.behavior=="function")(a))return a.behavior(_(r,a));let y=typeof a=="boolean"||a==null?void 0:a.behavior;for(let{el:w,top:d,left:v}of _(r,se(a))){let h=d-g.top+g.bottom,E=v-g.left+g.right;w.scroll({top:h,left:E,behavior:y})}}window.requestIdleCallback=window.requestIdleCallback||function(r){let a=Date.now();return setTimeout(function(){r({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-a))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(r){clearTimeout(r)};(()=>{let r=(e,t)=>{if(t){let o=t.innerText;navigator.clipboard.writeText(o);let i=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=i},3e3)}},a=async()=>{var t;let e=(((t=window.kr)==null?void 0:t.siteRoot)||"/")+"config.json";return await fetch(e).then(o=>o.json())},g=()=>{let e=!1,t=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",o=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),t(),window.addEventListener("scroll",t)},y=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(o=>{o.removeAttribute("id")});let t=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{t.classList.contains("toon")?(t.classList.remove("toon"),e.classList.remove("show")):(t.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",o=>{o.target.tagName.toLowerCase()==="a"&&o.target.getAttribute("href")&&(t.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",o=>{window.innerWidth>768&&t.classList.contains("toon")&&(t.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},w=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var t;(t=e.querySelector(".collapse-box-header"))==null||t.addEventListener("click",o=>{e.classList.toggle("active")})})},d=e=>{if(e.enable){let t=document.getElementsByClassName("kratos-page-content");t.length>0&&new Viewer(t[0],{filter:o=>!(typeof o.closest=="function"&&o.closest(".kr-linklist")!==null)})}},v,h=e=>{v=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},E=e=>{e.enable&&(document.body.oncopy=t=>{if(v){let o=window.getSelection().toString();o.length>e.threshold&&(t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",o+v))}})},B=(e,t=!0)=>{let o,i=e/1e3,l=Math.floor(i/60/60/24),u=Math.floor(i/60/60-24*l),C=Math.floor(i/60-24*60*l-60*u),S=Math.floor(i-24*60*60*l-60*60*u-60*C),L=l.toString(),c=u.toString(),s=C.toString(),m=S.toString();return t?(L&&L.length===1&&(L="0"+L),c&&c.length===1&&(c="0"+c),s&&s.length===1&&(s="0"+s),m&&m.length===1&&(m="0"+m),o=L+"\u5929"+c+"\u5C0F\u65F6"+s+"\u5206"+m+"\u79D2"):l<540?l<60?o=L+"\u5929":o=Math.floor(l/30).toString()+"\u4E2A\u6708":o=Math.floor(l/365).toString()+"\u5E74",o},U=e=>{let t=new Date(e.since),o=document.getElementById("kr-since");setInterval(()=>{o.innerText=B(Date.now()-t)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((o,i)=>{let l=o.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],u=document.createElement("button");u.className="copy-code",u.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',u.onclick=r.bind(null,u,l),o.appendChild(u)}),document.querySelectorAll("pre:has(code)").forEach((o,i)=>{let l=o.querySelector("code"),u=document.createElement("button");u.className="copy-code",u.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',u.onclick=r.bind(null,u,l),o.appendChild(u)})},W=()=>{let e=typeof window<"u",t=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),o=e&&"IntersectionObserver"in window,i=document.querySelector(".kr-comments.lazy-load"),l=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!t&&o&&i){let u=new IntersectionObserver(C=>{C[0].isIntersecting&&(l(),u.disconnect())},{threshold:0});u.observe(i)}else l();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},H=()=>{let e=document.getElementById("expire-alert");if(e){let t=e.querySelector("time"),o=new Date(parseInt(t.getAttribute("datetime"))),l=Date.now()-o,u=e.getAttribute("data-after-days");l>parseInt(u)*24*3600*1e3&&(t.innerText=B(l,!1),e.classList.remove("hidden"))}},p=(e,t)=>{let o=0;return function(){let i=this,l=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(i,l)},t||0)}},A=()=>{let e=document.getElementById("krw-toc"),t=()=>{let o=e.getElementsByClassName("toc-item"),i=[];try{Array.from(o).forEach(c=>{let s=c.querySelector(".toc-link"),m=decodeURI(s.getAttribute("href"));if(m.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let f=document.getElementById(m.substring(1));if(!f)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");f.setAttribute("data-toc-id",i.length),i.push({at:f,el:c})})}catch(c){console.log("\u9519\u8BEF\uFF1A",c.message),Array.from(o).forEach(s=>{s.classList.add("show")});return}let l=-1,u=c=>{if(l!==c){if(l!==-1&&i[l]){i[l].el.classList.remove("active"),i[l].el.classList.remove("show");let s=i[l].el;for(;!s.classList.contains("toc");)s.classList.contains("toc-item")&&s.classList.remove("show"),s=s.parentNode}if(c!==-1&&i[c]){i[c].el.classList.add("active"),i[c].el.classList.add("show");let s=i[c].el;for(;!s.classList.contains("toc");)s.classList.contains("toc-item")&&s.classList.add("show"),s=s.parentNode;setTimeout(()=>{var f;let m=(f=i[c])==null?void 0:f.el;m&&ie(m,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}l=c}};if("IntersectionObserver"in window){let c=p((m,f)=>{f===window.scrollY?window.requestAnimationFrame(()=>{u(m)}):c(m,window.scrollY)},100),s=new IntersectionObserver(m=>{let f=null;m.forEach(n=>{let b=Number.parseInt(n.target.getAttribute("data-toc-id"),10);!n.isIntersecting&&n.boundingClientRect.top<=n.rootBounds.top?f=b:n.isIntersecting&&n.boundingClientRect.bottom<n.rootBounds.top+n.rootBounds.height/2&&n.intersectionRatio===1&&(f=b-1)}),f!==null&&c(f,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});i.forEach(m=>{s.observe(m.at)}),window.addEventListener("pjax:before",()=>{s.disconnect(),i.length=0},{once:!0})}else{let c=()=>{i.forEach(n=>{n.h=n.at.getBoundingClientRect().top+window.scrollY-61})};c();let s=()=>{let n;!Number.isInteger(l)||l<0||l>i.length-1?n=0:n=l;let b=window.scrollY;if(b>=i[n].h)if(b>=i[i.length-1].h)n=i.length-1;else for(;b>=i[n+1].h;)n++;else for(;b<i[n].h&&(n--,!(n<0)););return n},m=p(()=>{window.requestAnimationFrame(()=>{u(s())})},100),f=p(()=>{c(),window.requestAnimationFrame(()=>{u(s())})},100);window.addEventListener("resize",f),window.addEventListener("scroll",m),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",m),i.length=0},{once:!0})}let C=document.getElementsByClassName("toc-progress-bar")[0],S=document.querySelector(".kratos-page-content"),L=()=>{if(S){let c=window.scrollY||document.documentElement.scrollTop,s=S.clientHeight,m=document.documentElement.clientHeight,f=S.offsetTop,n=s>m?s-m:document.documentElement.scrollHeight-m,b=Math.max(0,Math.min((c-f)/n,1)),D=Math.round(b*100);C.style.width=(b*100).toString()+"%",C.setAttribute("aria-valuenow",D)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(L)}),L()};e&&(e.offsetParent!==null?t():"IntersectionObserver"in window&&new IntersectionObserver(t,{threshold:0,once:!0}).observe(e))},N=e=>{if(!e.enable)return;let t=window.innerHeight,o=!1,i=()=>{window.requestAnimationFrame(()=>{t<window.scrollY?o||(document.body.classList.add("nav-up"),o=!0):t>window.scrollY&&o&&(document.body.classList.remove("nav-up"),o=!1),t=window.scrollY})};window.addEventListener("wheel",i)},k=()=>{let e=[A,X,w,W,H];for(let t of e)try{t()}catch(o){console.error("Error: ".concat(o)),o.stack&&console.error(o.stack)}},I=e=>{let t=[()=>h(e.copyrightNoticeForCopy),()=>d(e.viewerjs)];for(let o of t)try{o()}catch(i){console.error("Error: ".concat(i)),i.stack&&console.error(i.stack)}},T=()=>{document.removeEventListener("DOMContentLoaded",T,!1),window.removeEventListener("load",T,!1),a().then(t=>{let o=[()=>E(t.copyrightNoticeForCopy),()=>U(t.uptime),()=>N(t.topNavScrollToggle),()=>I(t)];for(let i of o)try{i()}catch(l){console.error("Error: ".concat(l)),l.stack&&console.error(l.stack)}window.addEventListener("pjax:complete",()=>{I(t)})}).catch(t=>{console.error("Load config failed: ".concat(t))});let e=[g,y,k];for(let t of e)try{t()}catch(o){console.error("Error: ".concat(o)),o.stack&&console.error(o.stack)}window.addEventListener("pjax:complete",()=>{k()})};document.readyState==="complete"?setTimeout(T):(document.addEventListener("DOMContentLoaded",T,!1),window.addEventListener("load",T,!1))})();})();
